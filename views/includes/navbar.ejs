<% var currUser = typeof currUser !== 'undefined' ? currUser : null; %>

<nav class="navbar navbar-expand-md bg-body-light border-bottom sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="/listings"><i id="compass" class="fa-regular fa-compass " ></i></a>
      <button class="navbar-toggler " type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse " id="navbarNavAltMarkup">
        <div class="navbar-nav menu">
          <a class="nav-link nav-home" href="/listings" >Home</a>

          <!-- Custom Language Selector -->
          <div class="language-container">
            <span class="language-label">üåê Language: </span>
            <div id="google_translate_element" class="custom-translate"></div>
          </div>
        </div>

        <div class="navbar-nav menu ms-auto">
          <form class="d-flex needs-validation" novalidate method="get" action='/listings/'>
            <div>
              <input class="form-control me-2 search-btn" type="search" placeholder="Search Destination" aria-label="Search" name="search" value="<%= typeof search !== 'undefined' ? search : '' %>" required>
              <div class="invalid-feedback">Search something</div>
            </div>
            <button class="btn btn-search" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
          </form>
        </div>

        <div class="navbar-nav menu ms-auto">
          <a class="nav-link" href="/listings/new">Add new listing</a>
          <% if(!currUser) { %>
          <a class="nav-link" href="/signup" ><b>Signup</b></a>
          <a class="nav-link" href="/login"><b>Login</b></a>
          <% } %>
          <% if(currUser) { %>
          <a class="nav-link" href="/logout"><b>Logout</b></a>
          <% } %>
        </div>
      </div>
    </div>
    
  </nav>

<!-- Google Translate Script -->
<script type="text/javascript">
  function googleTranslateElementInit() {
      new google.translate.TranslateElement({
          pageLanguage: 'en',
          includedLanguages: 'en,hi,fr,es,de,zh,ar,ru', // Added more languages
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
  }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>